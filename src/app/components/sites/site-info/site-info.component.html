<h5 class="mb-0">Study Site Information</h5>
<hr class="mt-2 mb-4" />
<form [formGroup]="siteForm" (ngSubmit)="onSubmit()">
<div class="row">
  <div class="col-md-6">
    <div class="form-group mb-3">
      <label class="form-label">Site Name*</label> 
      <input type="text" class="form-control"  formControlName="name" placeholder="Enter Site name here" />
      @if(siteForm.get('name').invalid && (siteForm.get('name').dirty || siteForm.get('name').touched  || errorMessage  )){
        <div class="text-danger">This field is required.</div> 
      }
     
    </div>
  </div>
  <div class="col-md-6">
    <div class="form-group mb-3">
      <label class="form-label">Address*</label>
      <input type="text" class="form-control" formControlName="address" placeholder="Enter Address here" />
      @if(siteForm.get('address').invalid && (siteForm.get('address').dirty || siteForm.get('address').touched  || errorMessage)){
        <div class="text-danger">This field is required.</div> 
      }
    </div>
  </div>

  <div class="col-md-6">
    <div class="form-group mb-3">
      <label class="form-label">City*</label>
      <input type="text" class="form-control" formControlName="city" placeholder="Enter City here" />
      <!-- <div *ngIf="siteForm.get('city')?.invalid && (siteForm.get('city')?.dirty || siteForm.get('city')?.touched  || errorMessage)" class="invalid-feedback">
        <div >This field is required.</div>
      </div> -->
      @if(siteForm.get('city').invalid && (siteForm.get('city').dirty || siteForm.get('city').touched  || errorMessage)){
        <div class="text-danger">This field is required.</div> 
      }
    </div>
  </div>

  <div class="col-md-6">
    <div class="form-group mb-3">
      <label class="form-label">Postal Code*</label>
      <input type="text" class="form-control" formControlName="postalCode" placeholder="Enter Postal Code here" />
      <!-- <div *ngIf="siteForm.get('postalCode')?.invalid && (siteForm.get('postalCode')?.dirty || siteForm.get('postalCode')?.touched  || errorMessage)" class="invalid-feedback">
        <div >This field is required.</div>
      </div> -->
      @if(siteForm.get('postalCode').invalid && (siteForm.get('city').dirty || siteForm.get('postalCode').touched  || errorMessage)){
        <div class="text-danger">This field is required.</div> 
      }
    </div>
  </div>

  <div class="col-md-6">
    <div class="form-group mb-3">
      <label class="form-label">Country*</label>
      <select class="form-select" aria-label="Default select example" formControlName="countryCode">
        <option selected>Select one Country</option>
        <!-- <option value="1">Spain</option> -->
        @for (item of countrieList; track $index) {
        <option [value]="item.code">{{ item.name}}</option>
        }

      </select>
      @if(siteForm.get('countryCode').invalid && (siteForm.get('countryCode').dirty || siteForm.get('countryCode').touched  || errorMessage)){
        <div class="text-danger">This field is required.</div> 
      }
    </div>
  </div>
</div>

<h5 class="mt-4 mb-0">Connect site to study</h5>
<hr class="mt-2 mb-4" />

<div class="row">
  <div class="col-md-6">
    <div class="form-group mb-3">
      <label class="form-label">Select studies*</label>
      <select class="form-select" aria-label="Default select example" formControlName="studies">
        <option selected>Select one options</option>
        @for (item of studyLists; track $index) {
          <option [value]="item.id">{{ item.name}}</option>
          }
        <!-- <option value="2">United State</option> -->
      </select>
      @if(siteForm.get('studies').invalid && (siteForm.get('studies').dirty || siteForm.get('studies').touched  || errorMessage)){
        <div class="text-danger">This field is required.</div> 
      }
    </div>
  </div>
</div>

@if(!siteId){
<h5 class="mt-4 mb-0">Clinical devices</h5>
<hr class="mt-2 mb-4" />

@for (item of clinicalLists; track $index) {
<p>
  <span class="fw-medium">Device# {{$index+1}}: </span> {{item}}
  <span class="d-block d-md-inline-block text-danger ms-md-4 mt-2 mt-md-0" (click)="remove($index)"><i
      class="bi bi-x-circle-fill me-1"></i> Remove device</span>
</p>
}




<div class="row align-items-center mt-4">
  <div class="col-sm-6 col-md-4">
    <div class="form-group mb-3 mb-md-0">
      <input type="text" class="form-control" formControlName="clinicalname" placeholder="Add your device here" />
    </div>
  </div>
  <div class="col-sm-6 col-md-4">
    <a class="text-info mb-0" (click)="add()">
      <i class="bi bi-plus-circle me-1"></i> Add device
    </a>
  </div>
</div>
}

</form>